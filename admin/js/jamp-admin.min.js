!function(t){"use strict";t(function(){let e=t("#jamp_meta_box"),a=t("th#jamp_note.column-jamp_note");function n(e,a){""!==e&&null!==e&&t.post(jamp_ajax.ajax_url,{_ajax_nonce:jamp_ajax.nonce,action:"move_to_trash",note:e},function(n){var o,i;let l,m,s,r,c,p,d;n.success?"column"===a?(o=e,l=t(".jamp-column-note[data-note="+o+"]"),m=l.parent("td"),s=m.find(".jamp-column-note").length,l.addClass("jamp-note--deleting").fadeOut(600,function(){t(this).remove(),s-1==0&&m.find(".jamp-column-note__no-notes-notice").removeClass("jamp-column-note__no-notes-notice--hidden")})):"adminbar"===a&&(i=e,r=t(".jamp-admin-bar-note[data-note="+i+"]"),c=r.data("scope"),p=r.parent(".jamp-admin-bar-section"),d=p.find(".jamp-admin-bar-note").length,r.addClass("jamp-note--deleting").fadeOut(600,function(){t(this).remove(),d-1==0&&p.find(".jamp-admin-bar-note__no-notes-notice").removeClass("jamp-admin-bar-note__no-notes-notice--hidden");let e;"global"===c?e=t("#wp-admin-bar-jamp .global-notes-count"):"section"===c&&(e=t("#wp-admin-bar-jamp .section-notes-count")),d-1==0?e.remove():e.text(d-1)})):alert(jamp_strings.move_to_trash_error)})}if(e.length>0){function o(e){0>t.inArray(".meta-section",e)&&(t("#jamp_meta_box .meta-section").hide().find("option:first").attr("selected","selected"),t("#jamp_meta_box #section").removeClass("form-field-invalid")),0>t.inArray(".meta-target-type",e)&&(t("#jamp_meta_box .meta-target-type").hide().find("option:first").attr("selected","selected"),t("#jamp_meta_box #target-type").removeClass("form-field-invalid")),0>t.inArray(".meta-target",e)&&(t("#jamp_meta_box .meta-target").hide().find("option:first").attr("selected","selected"),t("#jamp_meta_box #target").removeClass("form-field-invalid"))}function i(e){switch(e){case"global":o();break;case"section":o([".meta-section"]),t("#jamp_meta_box .meta-section").show();break;case"entity":o([".meta-target-type",".meta-target"]),t("#jamp_meta_box .meta-target-type").show(),t("#jamp_meta_box #target-type").trigger("change"),t("#jamp_meta_box .meta-target").show()}}t("#jamp_meta_box #target-type").on("change",function(){var e;""!==(e=this.value)&&null!==e?t.post(jamp_ajax.ajax_url,{_ajax_nonce:jamp_ajax.nonce,action:"build_targets_list",target_type:e},function(e){if(e.success){let a="";t.each(e.data,function(t,e){a+=`<option class="target-entity" value="${e.id}">${e.title} (${e.status})</option>`}),t("#jamp_meta_box #target option.target-entity").remove(),t("#jamp_meta_box #target").append(a);let n=t("#jamp_meta_box #saved-target").val();t(`#jamp_meta_box #target option[value="${n}"]`).length>0?t("#jamp_meta_box #target").val(n):t("#jamp_meta_box #target").val("")}else alert(jamp_strings.get_entities_list_error)}):t("#jamp_meta_box #target option.target-entity").remove()}),t("#jamp_meta_box input[type=radio][name=scope]").on("change",function(){i(this.value)}),i(t("#jamp_meta_box input[type=radio][name=scope]:checked").val()),t(".post-type-jamp_note #publish").on("click",function(e){let a=!1,n=t("#jamp_meta_box input[type=radio][name=scope]:checked");switch(n.val()){case"global":a=!0;break;case"section":let o=t("#jamp_meta_box #section");""!==o.val()&&null!==o.val()?(o.removeClass("form-field-invalid"),a=!0):(o.addClass("form-field-invalid"),a=!1);break;case"entity":let i=t("#jamp_meta_box #target-type"),l=t("#jamp_meta_box #target");""!==i.val()&&null!==i.val()?(i.removeClass("form-field-invalid"),a=!0):(i.addClass("form-field-invalid"),a=!1),""!==l.val()&&null!==l.val()?(l.removeClass("form-field-invalid"),a=!0):(l.addClass("form-field-invalid"),a=!1)}!1===a&&e.preventDefault()})}a.length>0&&(t(".jamp-column-note__note-trash-action").on("click",function(e){e.preventDefault();let a=t(this);t(".jamp-trash-dialog").dialog({modal:!0,closeText:"",buttons:{OK:function(){t(this).dialog("close"),n(a.data("note"),"column")}}})}),t(".jamp-column-note__note-info-action").on("click",function(t){t.preventDefault()}),t(".jamp-column-note__title").on("click",function(e){e.preventDefault(),t(this).children(".jamp-column-note__arrow").toggleClass("rotate-180"),t(this).next(".jamp-column-note__container").slideToggle(300)})),t(".jamp-admin-bar-action--trash").on("click",function(e){e.preventDefault();let a=t(this);t(".jamp-trash-dialog").dialog({modal:!0,closeText:"",buttons:{OK:function(){t(this).dialog("close"),n(a.data("note"),"adminbar")}}})}),t(".jamp-admin-bar-action--info").on("click",function(e){e.preventDefault(),t(this).parent().nextAll(".jamp-admin-bar-note__details").slideToggle(100)})})}(jQuery);